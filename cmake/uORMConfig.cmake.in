@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# Find JSON dependency
find_dependency(nlohmann_json)

# Based on how the library was built/configured, find the appropriate DB driver
# The variables USE_POSTGRESQL will be substituted by configure_package_config_file
set(USE_POSTGRESQL @USE_POSTGRESQL@)

if(USE_POSTGRESQL)
    # Find PostgreSQL dependencies
    find_dependency(PkgConfig)
    pkg_check_modules(LIBPQXX REQUIRED libpqxx)
else()
    # Find MySQL dependencies
    # Try find_package first
    find_package(mysql-connector-cpp CONFIG QUIET)
    if(NOT mysql-connector-cpp_FOUND)
        # If not found via config, try finding the library manually to match build behavior
        # However, for downstream users, we ideally want standard mechanisms.
        # Let's try to find it again without QUIET to show error if missing
        find_library(MYSQLCPPCONN_LIB NAMES mysqlcppconn mysqlcppconn8)
        if(NOT MYSQLCPPCONN_LIB)
             message(FATAL_ERROR "MySQL Connector/C++ not found.")
        endif()
    endif()
endif()

include("${CMAKE_CURRENT_LIST_DIR}/uORMTargets.cmake")
check_required_components(uorm)
